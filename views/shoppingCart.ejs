<!DOCTYPE html>
<html>
<head>
    <style>
        .glyphicon:hover {
            color:red;
        }
    </style>
    <link rel="stylesheet" href="/stylesheets/dropdowncss.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/productSectionStyle.css">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Latest compiled JavaScript -->
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
    <meta charset="UTF-8">
    <title>Home</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
</head>
<body ng-app="shoppingCart" ng-controller="shoppingCart" style="background-color: #f7f7f7">
<div class="container">
    <div class="page-header">
        <table>
            <tbody>
            <tr>
                <td width="100%">
                    Hi!<div class="dropdown"><a class="dropbtn" href="productPage.html" >{{username}} <i class="fa fa-caret-down" aria-hidden="true"></i></a>
                        <div class="dropdown-content">
                            <a href="/profile">Profile</a>
                            <a href="/signout">Sign Out!</a>
                        </div>
                    </div> | <a href="/postAdvertisement">Sell</a>
                </td>
                <td >
                    <a href="/shoppingCart" ><i class="fa fa-shopping-cart" style="font-size: 18px;color:grey;"></i></a>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <div class="row">
        <table>
            <tbody>
            <tr>
                <td>
                    <a href="/">
                        <img src="https://cdn4.iconfinder.com/data/icons/flat-brand-logo-2/512/ebay-128.png">
                    </a>
                </td>
                <td width="100%">
                    <input class="form-control" type="text"  placeholder="Search..." ng-model="searchQ">
                </td>
                <td>
                    <button class="btn btn-primary" ng-click="search()">Search</button>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
<div class="container">
    <div class="row">
        <h1> Your eBay Shopping Cart</h1>
        <div class="col-md-9">
            <div class="col-sm-12 col-md-10 col-md-offset-1">
                <table class="table table-hover">
                    <thead>
                    <tr>
                        <th>Product</th>
                        <th>Quantity</th>
                        <th class="text-center">Price</th>
                        <th class="text-center">Total</th>
                        <th> </th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="x in products">
                        <td class="col-md-6">
                            <div class="media">
                                <a class="thumbnail pull-left"> <img class="media-object" src="http://placehold.it/400x250/000/fff" style="width: 72px; height: 72px;"> </a>
                                <div class="media-body">
                                    <h4 class="media-heading"><a href="/product/{{ x.p_id._id }}">{{ x.p_id.p_name }}</a></h4>
                                    <h4 class="media-heading"><a href="/profile/{{ x.p_id.u_id }}">Seller</a></h4>
                                </div>
                            </div></td>
                        <td class="col-sm-1 col-md-1" style="text-align: center">
                            <input type="number" class="form-control" id="exampleInputEmail1" min="1" ng-change="test(x.quantity,x.p_id._id,x.p_id.price,x._id)" ng-model="x.quantity">
                        </td>
                        <td class="col-sm-1 col-md-1 text-center"><strong>${{ x.p_id.price }}</strong></td>
                        <td class="col-sm-1 col-md-1 text-center"><strong>${{ x.total }}</strong></td>
                        <td class="col-sm-1 col-md-1">
                            <span class="glyphicon glyphicon-remove" aria-hidden="true" style=""></span>
                        </td>
                    </tr>
                    <tr>
                    <tr>
                        <td>   </td>
                        <td>   </td>
                        <td>   </td>
                        <td><h5>Subtotal</h5></td>
                        <td class="text-right"><h5><strong>{{ grandTotal }}</strong></h5></td>
                    </tr>
                    <tr>
                        <td>   </td>
                        <td>   </td>
                        <td>   </td>
                        <td><h5>Estimated shipping</h5></td>
                        <td class="text-right"><h5><strong>$0</strong></h5></td>
                    </tr>
                    <tr>
                        <td>   </td>
                        <td>   </td>
                        <td>   </td>
                        <td><h3>Total</h3></td>
                        <td class="text-right"><h3><strong>${{ grandTotal }}</strong></h3></td>
                    </tr>
                    <tr>
                        <td>   </td>
                        <td>   </td>
                        <td>   </td>
                        <td>
                            <a href="/">
                                <button type="button" class="btn btn-default btn-block">
                                Continue Shopping
                                </button>
                            </a>
                        </td>
                        <td>
                            <button type="button" class="btn btn-primary btn-block" ng-click="checkoutPage()">
                                Checkout
                            </button>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="col-md-3" style="background-color: #fff;height: 400px;">
            <div class="page-header">
                <h4> <b>Shopping Cart Summary</b></h4>
            </div>
            <table>
                <tr>
                    <td>
                        <h4><b>Total: ${{ grandTotal }}</b> </h4>
                    </td>
                </tr>
                <tr>
                    <td>
                        <button class="btn btn-primary btn-block" ng-click="checkoutPage()">Proceed To Checkout</button>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</div>
<div class="container">
    <div class="page-header">
        <h2>Searched</h2>
    </div>
</div>
<div class="container">
    <div id="products" class="row list-group">

        <div class="item  col-xs-4 col-lg-4" ng-repeat="x in searchs">
            <div class="thumbnail">
                <img class="group list-group-image" src="http://placehold.it/400x250/000/fff" alt="" />
                <div class="caption">
                    <a href="/product/{{x.p_id}}">
                        <h4 class="group inner list-group-item-heading">
                            {{ x.p_name }}</h4>
                    </a>
                    <p class="group inner list-group-item-text">
                        For {{ x.ausel }}</p>
                    <div class="row">
                        <div class="col-xs-12 col-md-6">
                            <p class="lead">
                                ${{ x.price }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
<script src="javascripts/shoppingCart.js" type="text/javascript"></script>
</html>
